{"version":3,"file":"../EnconterManager.js","sourceRoot":"../../src","sources":["EnconterManager.coffee"],"names":[],"mappings":"AAAA,IAAA,aAAA,EAAA,OAAA,EAAA,gBAAA,EAAA;;AAAA,OAAA,GAAU,OAAA,CAAQ,eAAR,CAAwB,CAAC;;AACnC,eAAA,GAAkB,OAAA,CAAQ,eAAR,CAAwB,CAAC,WAAW,CAAC;;AACvD,aAAA,GAAgB,OAAA,CAAQ,iBAAR;;AAEhB,MAAM,CAAC,OAAP,GAAuB;EAAN,MAAA,iBAAA,QAA+B,QAA/B;IAcf,IAAM,CAAA,CAAA;aACJ,IAAC,CAAA,eAAe,CAAC,IAAjB,CAAA;IADI;;IAGN,aAAe,CAAA,CAAA;MACb,IAAG,IAAI,CAAC,MAAL,CAAA,CAAA,IAAiB,IAAC,CAAA,eAArB;eACE,IAAC,CAAA,cAAD,CAAA,EADF;;IADa;;IAIf,cAAgB,CAAA,CAAA;AACd,UAAA;MAAA,SAAA,GAAY,IAAI,aAAJ,CAAkB;QAC5B,OAAA,EAAS,IAAC,CAAA;MADkB,CAAlB;aAGZ,SAAS,CAAC,KAAV,CAAA;IAJc;;EArBD;;EACf,gBAAC,CAAA,UAAD,CACE;IAAA,OAAA,EACE;MAAA,OAAA,EAAS;IAAT,CADF;IAEA,eAAA,EACE;MAAA,OAAA,EAAS;IAAT,CAHF;IAIA,eAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAA,CAAA;eACN,IAAI,eAAJ,CAAoB;UAClB,QAAA,EAAU,CAAA,CAAA,GAAA;mBACR,IAAC,CAAA,aAAD,CAAA;UADQ,CADQ;UAGlB,QAAA,EAAU,IAAC,CAAA,OAAO,CAAC,mBAAT,CAA6B,UAA7B;QAHQ,CAApB;MADM;IAAR;EALF,CADF","sourcesContent":["Element = require('spark-starter').Element\nPropertyWatcher = require('spark-starter').Invalidated.PropertyWatcher\nConfrontation = require('./Confrontation')\n\nmodule.exports = class EncounterManager extends Element\n  @properties\n    subject: \n      default: null\n    baseProbability: \n      default: 0.2\n    locationWatcher:\n      calcul: ->\n        new PropertyWatcher({\n          callback: =>\n            @testEncounter()\n          property: @subject.getPropertyInstance('location')\n        })\n\n  init: ->\n    @locationWatcher.bind()\n\n  testEncounter: ->\n    if Math.random() <= @baseProbability\n      @startEncounter()\n\n  startEncounter: ->\n    encounter = new Confrontation({\n      subject: @subject\n    })\n    encounter.start()\n\n\n"]}